/* Global non-select for non-editable UI:
   - Disable selection on all content by default
   - Re-enable on interactive/editable controls so users can type/select in inputs
*/

/* Default: disable text selection */
html, body, body * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Re-enable selection and caret for editable controls */
input, textarea, select, [contenteditable="true"], .selectable {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

/* Also allow selection for code/pre blocks in case of docs */
pre, code, kbd, samp {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

/* Buttons should not keep text caret/selection */
button { -webkit-user-select: none; user-select: none; }

.logout-btn {
  background: #dc3545 !important;
  color: #fff !important;
  border: none !important;
  padding: 8px 16px !important;
  border-radius: 8px !important;
  font-weight: 600;
  transition: background 0.2s ease;
}
.logout-btn:hover {
  background: #c82333 !important;
}

/* Make images non-draggable/non-selectable unless explicitly overridden */
img {
  -webkit-user-drag: none;
  user-select: none;
}
/* === CHAT UI WHATSAPP-LIKE REFINADO === */

/* Contenedor del chat */
.chat-box {
  max-height: 520px;
  overflow-y: auto;
  padding: 14px 16px;
  background: #f0f2f5; /* tono gris claro similar a WhatsApp desktop */
  display: flex;
  flex-direction: column;
  gap: 0; /* gestionamos separación con margin-top en .bubble */
  scroll-behavior: smooth;
}

.chat-box::-webkit-scrollbar { width: 8px; }
.chat-box::-webkit-scrollbar-track { background: transparent; }
.chat-box::-webkit-scrollbar-thumb { background: #c9d1d9; border-radius: 4px; }

/* Mensaje base */
.bubble {
  display: flex;
  max-width: 76%;
  position: relative;
  margin-top: 14px; /* más espacio superior entre mensajes */
}
.chat-box .bubble:first-child { margin-top: 0; }

.bubble.from-pac { align-self: flex-end; }
.bubble.from-doc { align-self: flex-start; }

/* Eliminar fondo heredado (halo verde/azulado) aplicado al contenedor .bubble por estiloDoc.css */
.bubble.from-pac, .bubble.from-doc {
  background: transparent !important; /* solo la .body tendrá color */
  box-shadow: none; /* evita doble sombra detrás de la burbuja */
  padding: 0; /* padding lo maneja .body */
}

/* Cuerpo del mensaje: incluye texto y hora */
.bubble .body {
  position: relative;
  padding: 8px 54px 8px 12px; /* espacio para timestamp a la derecha */
  border-radius: 16px;
  font-size: 17px;
  line-height: 1.38;
  word-break: break-word;
  white-space: pre-wrap; /* preservar saltos de línea */
  box-shadow: 0 1px 1px rgba(0,0,0,0.08);
  color: #111;
}

.bubble.from-pac .body {
  background: #e6f0ff; /* azul claro clínico */
  border-bottom-right-radius: 4px;
  color: #0a3d5e; /* texto oscuro legible */
}

.bubble.from-doc .body {
  background: #fff;
  border: 1px solid #e2e8f0;
  border-bottom-left-radius: 4px;
}

/* Tails */
.bubble.from-pac .body::after,
.bubble.from-doc .body::after {
  content: "";
  position: absolute;
  bottom: 0;
  width: 14px;
  height: 14px;
  transform: translateY(2px) rotate(45deg);
}




/* Texto dentro del mensaje */
.bubble .body .text { display: block; }

/* Hora dentro de la burbuja */
.bubble .body .time {
  position: absolute;
  bottom: 4px;
  right: 12px;
  font-size: 0.65rem;
  line-height: 1;
  color: #667781; /* tono gris azulado similar */
  opacity: .85;
}

/* Selección de texto dentro de burbujas permitida */
.bubble .body, .bubble .body .text { -webkit-user-select: text; user-select: text; }

/* Animación de aparición para nuevos mensajes */
.bubble { animation: fadeInMsg .18s ease-in; }
@keyframes fadeInMsg { from { opacity:0; transform: translateY(3px);} to { opacity:1; transform: translateY(0);} }

/* Formulario de respuesta */
.respuesta-form textarea {
  min-height: 58px;
  max-height: 280px;
  resize: vertical;
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid #d0d7de;
  font-size: 0.95rem;
  line-height: 1.4;
  background: #fff;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}
.respuesta-form textarea:focus { outline: 2px solid #25d36633; border-color: #25d366; }

/* Botón enviar (paciente) */
#pacChatSend, #docChatSend {
  display:flex;
  align-items:center;
  justify-content:center;
  background:#25d366;
  border:none;
  border-radius:50%;
  width:44px;
  height:44px;
  cursor:pointer;
  transition: background .15s ease-in-out;
}
#pacChatSend:hover, #docChatSend:hover { background:#1ebe57; }
#pacChatSend img, #docChatSend img { pointer-events:none; }

/* Contenedor acciones debajo del chat */
.acciones-row { display:flex; gap:8px; align-items:center; }
@media (max-width: 768px){
  .bubble { max-width: 88%; }
  .chat-box { max-height: 60vh; }
}

/* === Overrides específicos para vista del Doctor === */
body.doctor-chat .detalle-consulta { display:flex; flex-direction:column; gap:8px; }
body.doctor-chat .detalle-consulta .chat-box { flex:1 1 auto; }
body.doctor-chat .acciones-consulta { margin-top:8px; }
/* Invertir colores/alineación: mensajes del doctor (from-doc) a la derecha en verde */
body.doctor-chat .bubble.from-doc { align-self:flex-end; }
body.doctor-chat .bubble.from-doc .body { background:#e6f0ff; border: none; border-bottom-right-radius:4px; color:#0a3d5e; }
/* Quitar cola en mensajes propios del doctor (verde) para igualarlo al paciente */
body.doctor-chat .bubble.from-doc .body::after { display:none !important; }
body.doctor-chat .bubble.from-doc .body { border-bottom-right-radius:16px; }

/* Paciente (entrantes) a la izquierda en blanco */
body.doctor-chat .bubble.from-pac { align-self:flex-start; }
body.doctor-chat .bubble.from-pac .body { background:#ffffff; border:1px solid #e2e8f0; border-bottom-left-radius:4px; }
body.doctor-chat .bubble.from-pac .body::after { left:-6px; right:auto; background:#ffffff; border-left:1px solid #e2e8f0; border-bottom:1px solid #e2e8f0; }

/* Quitar cola en mensajes del paciente (verde) en vista paciente */
.bubble.from-pac .body::after { display:none !important; }
/* Ajustar radio completo para estética sin cola */
.bubble.from-pac .body { border-bottom-right-radius:16px; }


